<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#FAF9F5" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#262624" media="(prefers-color-scheme: dark)">
    <meta name="description" content="–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π –ú–ö–ù–º-241">
    <title>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ú–ö–ù–º-241</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@350..600&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-bg-base: 250 249 245;
            --color-bg-surface: 255 255 255;
            --color-bg-elevated: 245 244 237;
            --color-text-primary: 61 61 58;
            --color-text-secondary: 117 117 114;
            --color-text-tertiary: 161 161 157;
            --color-accent: 217 119 87;
            --color-accent-hover: 200 106 74;
            --color-border: 61 61 58;
            --space-xs: 0.4rem;
            --space-sm: 0.75rem;
            --space-md: 1rem;
            --space-lg: 1.5rem;
            --space-xl: 2rem;
            --radius-sm: 0.5rem;
            --radius-md: 0.75rem;
            --radius-lg: 1rem;
            --radius-xl: 1.25rem;
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --shadow-sm: 0 1px 3px rgb(0 0 0 / 0.07), 0 1px 2px rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px rgb(0 0 0 / 0.07), 0 2px 4px rgb(0 0 0 / 0.05);
            --shadow-lg: 0 10px 15px rgb(0 0 0 / 0.07), 0 4px 6px rgb(0 0 0 / 0.05);
            --shadow-xl: 0 20px 25px rgb(0 0 0 / 0.07), 0 10px 10px rgb(0 0 0 / 0.04);
            --ease-out: cubic-bezier(0.2, 0.8, 0.4, 1);
            --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
            --duration-fast: 150ms;
            --duration-base: 300ms;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-bg-base: 38 38 36;
                --color-bg-surface: 47 47 44;
                --color-bg-elevated: 58 58 55;
                --color-text-primary: 242 239 233;
                --color-text-secondary: 147 145 137;
                --color-border: 147 145 137;
                --color-accent: 198 97 63;
                --color-accent-hover: 224 122 95;
                --shadow-sm: 0 1px 4px rgb(0 0 0 / 0.4);
                --shadow-md: 0 4px 8px rgb(0 0 0 / 0.5);
                --shadow-lg: 0 10px 20px rgb(0 0 0 / 0.6);
            }
        }

        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            -webkit-text-size-adjust: 100%;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-sans);
            font-size: var(--text-base);
            font-weight: 400;
            line-height: 1.5;
            color: rgb(var(--color-text-primary));
            background: rgb(var(--color-bg-base));
        }

        /* –°–Ω–µ–∂–∏–Ω–∫–∏ - –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π –ø–µ—Ä–∏–æ–¥ */
        .snowflakes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            overflow: hidden;
        }

        .snowflake {
            position: absolute;
            top: -20px;
            color: rgb(var(--color-text-tertiary));
            font-size: 1rem;
            opacity: 0.8;
            animation: snowfall linear infinite;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }

        .snowflake:nth-child(1) { left: 5%; animation-duration: 8s; animation-delay: 0s; font-size: 0.8rem; }
        .snowflake:nth-child(2) { left: 15%; animation-duration: 12s; animation-delay: 1s; font-size: 1.2rem; }
        .snowflake:nth-child(3) { left: 25%; animation-duration: 10s; animation-delay: 2s; font-size: 0.9rem; }
        .snowflake:nth-child(4) { left: 35%; animation-duration: 14s; animation-delay: 0.5s; font-size: 1.1rem; }
        .snowflake:nth-child(5) { left: 45%; animation-duration: 9s; animation-delay: 3s; font-size: 0.7rem; }
        .snowflake:nth-child(6) { left: 55%; animation-duration: 11s; animation-delay: 1.5s; font-size: 1rem; }
        .snowflake:nth-child(7) { left: 65%; animation-duration: 13s; animation-delay: 2.5s; font-size: 1.3rem; }
        .snowflake:nth-child(8) { left: 75%; animation-duration: 8s; animation-delay: 4s; font-size: 0.8rem; }
        .snowflake:nth-child(9) { left: 85%; animation-duration: 10s; animation-delay: 0.8s; font-size: 1rem; }
        .snowflake:nth-child(10) { left: 95%; animation-duration: 15s; animation-delay: 2s; font-size: 0.9rem; }

        @keyframes snowfall {
            0% {
                transform: translateY(-20px) rotate(0deg) translateX(0);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            90% {
                opacity: 0.6;
            }
            100% {
                transform: translateY(100vh) rotate(360deg) translateX(30px);
                opacity: 0;
            }
        }

        .app {
            display: flex;
            flex-direction: column;
            gap: var(--space-xl);
            max-width: 56rem;
            margin: 0 auto;
            padding: var(--space-lg);
            min-height: 100vh;
            padding-bottom: calc(6rem + env(safe-area-inset-bottom));
        }

        .header {
            display: flex;
            flex-direction: column;
            gap: var(--space-lg);
            animation: headerSlideIn 0.6s var(--ease-spring) both;
        }

        @keyframes headerSlideIn {
            from { opacity: 0; transform: translateY(-20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .header__date {
            font-size: var(--text-xl);
            font-weight: 600;
            letter-spacing: -0.01em;
            background: linear-gradient(135deg, rgb(var(--color-text-primary)) 0%, rgb(var(--color-text-secondary)) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .week-nav {
            position: fixed;
            bottom: max(env(safe-area-inset-bottom), var(--space-md));
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            background: rgb(var(--color-bg-surface) / 0.8);
            backdrop-filter: blur(40px) saturate(180%);
            border: 1px solid rgb(var(--color-border) / 0.08);
            border-radius: var(--radius-xl);
            padding: var(--space-sm);
            box-shadow: var(--shadow-lg);
            transition: all var(--duration-base) var(--ease-out);
            animation: bottomBarSlideUp 0.5s var(--ease-spring) both;
        }

        @keyframes bottomBarSlideUp {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }

        .week-nav:hover {
            box-shadow: var(--shadow-xl);
            border-color: rgb(var(--color-border) / 0.12);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            height: 3rem;
            padding: 0 var(--space-lg);
            font-size: var(--text-sm);
            font-weight: 500;
            color: rgb(var(--color-text-secondary));
            background: transparent;
            border: 1px solid rgb(var(--color-border) / 0.08);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            cursor: pointer;
            transition: all var(--duration-base) var(--ease-out);
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .btn--icon {
            width: 3rem;
            padding: 0;
        }

        .btn:hover:not(:disabled) {
            color: rgb(var(--color-text-primary));
            border-color: rgb(var(--color-border) / 0.12);
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
        }

        .btn:active:not(:disabled) {
            transform: translateY(0) scale(0.98);
            box-shadow: var(--shadow-sm);
        }

        .btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .btn--primary {
            color: rgb(var(--color-accent));
            border-color: rgb(var(--color-accent) / 0.1);
            background: rgb(var(--color-accent) / 0.1);
            min-width: 4rem;
            font-weight: 600;
            font-size: var(--text-base);
        }

        .btn--primary:hover:not(:disabled) {
            color: rgb(var(--color-accent-hover));
            background: rgb(var(--color-accent) / 0.15);
            border-color: rgb(var(--color-accent) / 0.2);
        }

        .btn__icon {
            width: 1.25rem;
            height: 1.25rem;
            stroke-width: 2;
            transition: transform var(--duration-fast) var(--ease-out);
        }

        .btn:hover .btn__icon {
            transform: scale(1.1);
        }

        .schedule-container {
            display: flex;
            flex-direction: column;
            gap: var(--space-lg);
            transition: opacity var(--duration-fast) var(--ease-out), transform var(--duration-base) var(--ease-out);
            flex: 1;
        }

        .schedule-container--loading {
            opacity: 0;
            transform: translateY(20px);
        }

        .day-card {
            background: rgb(var(--color-bg-surface));
            border: 1px solid rgb(var(--color-border) / 0.08);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            animation: cardSlideIn 0.5s var(--ease-spring) both;
            transition: all var(--duration-base) var(--ease-out);
        }

        @keyframes cardSlideIn {
            from { opacity: 0; transform: translateY(30px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .day-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: rgb(var(--color-border) / 0.12);
        }

        .day-card__header {
            padding: var(--space-md);
            font-size: var(--text-base);
            font-weight: 500;
            background: rgb(var(--color-bg-surface));
            border-bottom: 1px solid rgb(var(--color-border) / 0.08);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            transition: background-color var(--duration-base) var(--ease-out);
        }

        .day-card__header::before {
            content: '';
            width: 0.5rem;
            height: 0.5rem;
            background: rgb(var(--color-accent));
            border-radius: 50%;
            flex-shrink: 0;
            transition: all var(--duration-base) var(--ease-out);
        }

        .day-card--today .day-card__header {
            background: rgb(var(--color-accent) / 0.12);
        }

        .day-card--today .day-card__header::before {
            transform: scale(1.4);
            box-shadow: 0 0 6px rgb(var(--color-accent));
        }

        .day-card:hover .day-card__header::before {
            transform: scale(1.3);
            background: rgb(var(--color-accent-hover));
        }

        .lesson {
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
            padding: var(--space-md);
            color: inherit;
            text-decoration: none;
            border-bottom: 1px solid rgb(var(--color-border) / 0.08);
            transition: all var(--duration-base) var(--ease-out);
            animation: lessonSlideIn 0.6s var(--ease-out) both;
        }

        @keyframes lessonSlideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .lesson:last-child {
            border-bottom: none;
        }

        .lesson--clickable {
            cursor: pointer;
        }

        .lesson--clickable:hover {
            background: rgb(var(--color-accent) / 0.12);
            transform: translateX(8px);
            border-color: rgb(var(--color-accent) / 0.1);
        }

        .lesson--clickable:active {
            transform: translateX(8px) scale(0.98);
        }

        .lesson__time {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            font-size: 0.8rem;
            font-weight: 500;
            color: rgb(var(--color-text-tertiary));
            transition: color var(--duration-base) var(--ease-out);
        }

        .lesson--clickable:hover .lesson__time {
            color: rgb(var(--color-accent));
        }

        .lesson__icon {
            width: 0.9rem;
            height: 0.9rem;
            color: rgb(var(--color-accent));
            flex-shrink: 0;
            transition: all var(--duration-base) var(--ease-out);
        }

        .lesson--clickable:hover .lesson__icon {
            transform: scale(1.2) rotate(5deg);
            color: rgb(var(--color-accent-hover));
        }

        .lesson__title {
            font-size: 0.95rem;
            font-weight: 500;
            line-height: 1.35;
            color: rgb(var(--color-text-primary));
            transition: all var(--duration-base) var(--ease-out);
        }

        .lesson--clickable:hover .lesson__title {
            color: rgb(var(--color-accent));
            transform: translateX(2px);
        }

        .lesson__meta {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--space-sm);
        }

        .lesson__tag {
            padding: 0.25rem var(--space-sm);
            font-size: 0.8rem;
            font-weight: 500;
            color: rgb(var(--color-accent));
            background: rgb(var(--color-accent) / 0.1);
            border-radius: var(--radius-md);
            transition: all var(--duration-base) var(--ease-out);
        }

        .lesson--clickable:hover .lesson__tag {
            background: rgb(var(--color-accent));
            color: rgb(var(--color-bg-surface));
            transform: translateY(-2px);
        }

        .lesson__teacher {
            font-size: 0.8rem;
            color: rgb(var(--color-text-secondary));
            transition: all var(--duration-base) var(--ease-out);
        }

        .lesson--clickable:hover .lesson__teacher {
            color: rgb(var(--color-text-primary));
            transform: translateX(2px);
        }

        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: var(--space-lg);
            padding: var(--space-xl) var(--space-lg);
            text-align: center;
            background: rgb(var(--color-bg-surface));
            border: 1px solid rgb(var(--color-border) / 0.08);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-sm);
            animation: cardSlideIn 0.5s var(--ease-spring) both;
            overflow: hidden;
            position: relative;
        }

        /* –ë–∞–∑–æ–≤–∞—è —ë–ª–∫–∞ */
        .holiday-tree {
            font-size: 5rem;
            line-height: 1;
            animation: treeFloat 3s ease-in-out infinite;
            filter: drop-shadow(0 4px 8px rgba(0, 128, 0, 0.3));
        }

        @keyframes treeFloat {
            0%, 100% { transform: translateY(0) rotate(-2deg) scale(1); }
            50% { transform: translateY(-10px) rotate(2deg) scale(1.05); }
        }

        /* –ü—Ä–∞–∑–¥–Ω–∏—á–Ω—ã–π —Ä–µ–∂–∏–º - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        .holiday-mode .holiday-tree {
            font-size: 6rem;
            animation: treeDance 2s ease-in-out infinite, treeGlow 1.5s ease-in-out infinite alternate;
        }

        @keyframes treeDance {
            0%, 100% { transform: translateY(0) rotate(-3deg) scale(1); }
            25% { transform: translateY(-15px) rotate(2deg) scale(1.08); }
            50% { transform: translateY(-5px) rotate(-2deg) scale(1.03); }
            75% { transform: translateY(-12px) rotate(3deg) scale(1.06); }
        }

        @keyframes treeGlow {
            from { filter: drop-shadow(0 0 10px rgba(0, 200, 0, 0.4)) drop-shadow(0 0 20px rgba(255, 215, 0, 0.3)); }
            to { filter: drop-shadow(0 0 20px rgba(0, 200, 0, 0.6)) drop-shadow(0 0 40px rgba(255, 215, 0, 0.5)); }
        }

        /* –ì–∏—Ä–ª—è–Ω–¥–∞ */
        .garland {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-top: -1rem;
        }

        .garland__light {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: twinkle 1s ease-in-out infinite;
        }

        .garland__light:nth-child(1) { background: #ff4444; animation-delay: 0s; }
        .garland__light:nth-child(2) { background: #44ff44; animation-delay: 0.2s; }
        .garland__light:nth-child(3) { background: #4444ff; animation-delay: 0.4s; }
        .garland__light:nth-child(4) { background: #ffff44; animation-delay: 0.6s; }
        .garland__light:nth-child(5) { background: #ff44ff; animation-delay: 0.8s; }
        .garland__light:nth-child(6) { background: #44ffff; animation-delay: 1s; }
        .garland__light:nth-child(7) { background: #ff8844; animation-delay: 0.3s; }

        @keyframes twinkle {
            0%, 100% { 
                opacity: 1; 
                transform: scale(1);
                box-shadow: 0 0 10px currentColor, 0 0 20px currentColor;
            }
            50% { 
                opacity: 0.4; 
                transform: scale(0.8);
                box-shadow: 0 0 5px currentColor;
            }
        }

        /* –ò—Å–∫—Ä—ã –≤–æ–∫—Ä—É–≥ —ë–ª–∫–∏ */
        .sparkles {
            position: absolute;
            width: 200px;
            height: 200px;
            pointer-events: none;
        }

        .sparkle {
            position: absolute;
            font-size: 1.2rem;
            animation: sparkleFloat 2s ease-in-out infinite;
        }

        .sparkle:nth-child(1) { top: 10%; left: 10%; animation-delay: 0s; }
        .sparkle:nth-child(2) { top: 20%; right: 10%; animation-delay: 0.3s; }
        .sparkle:nth-child(3) { top: 50%; left: 5%; animation-delay: 0.6s; }
        .sparkle:nth-child(4) { top: 50%; right: 5%; animation-delay: 0.9s; }
        .sparkle:nth-child(5) { bottom: 20%; left: 15%; animation-delay: 0.2s; }
        .sparkle:nth-child(6) { bottom: 20%; right: 15%; animation-delay: 0.5s; }

        @keyframes sparkleFloat {
            0%, 100% { 
                opacity: 0; 
                transform: scale(0) rotate(0deg); 
            }
            50% { 
                opacity: 1; 
                transform: scale(1) rotate(180deg); 
            }
        }

        /* –ó–≤–µ–∑–¥–∞ –Ω–∞ –≤–µ—Ä—Ö—É—à–∫–µ */
        .tree-star {
            position: absolute;
            top: -10px;
            font-size: 1.5rem;
            animation: starPulse 1s ease-in-out infinite alternate;
        }

        @keyframes starPulse {
            from { 
                transform: scale(1) rotate(-10deg);
                filter: drop-shadow(0 0 5px gold);
            }
            to { 
                transform: scale(1.3) rotate(10deg);
                filter: drop-shadow(0 0 15px gold) drop-shadow(0 0 25px orange);
            }
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —ë–ª–∫–∏ —Å –¥–µ–∫–æ—Ä–∞—Ü–∏—è–º–∏ */
        .tree-container {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .empty-state__title {
            font-size: var(--text-xl);
            font-weight: 600;
            color: rgb(var(--color-text-primary));
        }

        .holiday-mode .empty-state__title {
            background: linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 25%, #ffe66d 50%, #95e1d3 75%, #ff6b6b 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shimmer 3s linear infinite;
        }

        @keyframes shimmer {
            to { background-position: 200% center; }
        }

        .empty-state__text {
            font-size: var(--text-base);
            color: rgb(var(--color-text-secondary));
            max-width: 20rem;
        }

        /* –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            animation: confettiFall linear infinite;
        }

        .confetti:nth-child(1) { left: 10%; background: #ff4444; animation-duration: 3s; animation-delay: 0s; border-radius: 50%; }
        .confetti:nth-child(2) { left: 20%; background: #44ff44; animation-duration: 4s; animation-delay: 0.5s; }
        .confetti:nth-child(3) { left: 30%; background: #4444ff; animation-duration: 3.5s; animation-delay: 1s; border-radius: 50%; }
        .confetti:nth-child(4) { left: 40%; background: #ffff44; animation-duration: 4.5s; animation-delay: 0.2s; }
        .confetti:nth-child(5) { left: 50%; background: #ff44ff; animation-duration: 3s; animation-delay: 0.7s; border-radius: 50%; }
        .confetti:nth-child(6) { left: 60%; background: #44ffff; animation-duration: 4s; animation-delay: 1.2s; }
        .confetti:nth-child(7) { left: 70%; background: #ff8844; animation-duration: 3.5s; animation-delay: 0.3s; border-radius: 50%; }
        .confetti:nth-child(8) { left: 80%; background: #88ff44; animation-duration: 4.5s; animation-delay: 0.9s; }
        .confetti:nth-child(9) { left: 90%; background: #ff4488; animation-duration: 3s; animation-delay: 1.5s; border-radius: 50%; }

        @keyframes confettiFall {
            0% { 
                transform: translateY(-20px) rotate(0deg);
                opacity: 1;
            }
            100% { 
                transform: translateY(300px) rotate(720deg);
                opacity: 0;
            }
        }

        .day-card:nth-child(1) { animation-delay: 0.1s; }
        .day-card:nth-child(2) { animation-delay: 0.2s; }
        .day-card:nth-child(3) { animation-delay: 0.3s; }
        .day-card:nth-child(4) { animation-delay: 0.4s; }
        .day-card:nth-child(5) { animation-delay: 0.5s; }
        .day-card:nth-child(6) { animation-delay: 0.6s; }

        .lesson:nth-child(1) { animation-delay: 0.15s; }
        .lesson:nth-child(2) { animation-delay: 0.25s; }
        .lesson:nth-child(3) { animation-delay: 0.35s; }
        .lesson:nth-child(4) { animation-delay: 0.45s; }

        @media (max-width: 768px) {
            .app {
                padding-inline: var(--space-md);
                gap: var(--space-lg);
            }

            .lesson--clickable:hover {
                transform: translateX(4px);
            }

            .lesson--clickable:active {
                transform: translateX(4px) scale(0.98);
            }

            .holiday-tree {
                font-size: 4rem;
            }

            .holiday-mode .holiday-tree {
                font-size: 5rem;
            }
        }

        @media (max-width: 640px) {
            .btn {
                height: 2.75rem;
                padding: 0 var(--space-md);
            }

            .btn--icon {
                width: 2.75rem;
            }

            .btn--primary {
                min-width: 3.5rem;
                font-size: var(--text-sm);
            }
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation: none !important;
                transition: none !important;
            }

            .lesson--clickable:hover,
            .day-card:hover,
            .btn:hover:not(:disabled) {
                transform: none !important;
            }

            .snowflakes,
            .sparkles,
            .garland {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <header class="header">
            <h1 class="header__date" id="dateDisplay"></h1>
        </header>

        <main class="schedule-container" id="schedule"></main>

        <nav class="week-nav" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –Ω–µ–¥–µ–ª—è–º">
            <button class="btn btn--icon" id="prevBtn" aria-label="–ü—Ä–µ–¥—ã–¥—É—â–∞—è –Ω–µ–¥–µ–ª—è" type="button">
                <svg class="btn__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/>
                </svg>
            </button>
            <button class="btn btn--primary" id="resetBtn" type="button">
                <span id="weekNumber"></span>
            </button>
            <button class="btn btn--icon" id="nextBtn" aria-label="–°–ª–µ–¥—É—é—â–∞—è –Ω–µ–¥–µ–ª—è" type="button">
                <svg class="btn__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
                </svg>
            </button>
        </nav>
    </div>

    <!-- –°–Ω–µ–∂–∏–Ω–∫–∏ –¥–ª—è –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ -->
    <div class="snowflakes" id="snowflakes" style="display: none;">
        <div class="snowflake">‚ùÑ</div>
        <div class="snowflake">‚ùÖ</div>
        <div class="snowflake">‚ùÜ</div>
        <div class="snowflake">‚ùÑ</div>
        <div class="snowflake">‚ùÖ</div>
        <div class="snowflake">‚ùÜ</div>
        <div class="snowflake">‚ùÑ</div>
        <div class="snowflake">‚ùÖ</div>
        <div class="snowflake">‚ùÜ</div>
        <div class="snowflake">‚ùÑ</div>
    </div>

    <script type="module">
        const CONFIG = Object.freeze({
            WEEK_RANGE: Object.freeze({ MIN: 1, MAX: 39 }),
            PERIODS: Object.freeze({
                SEMESTER_1: { min: 1, max: 18 },
                HOLIDAYS: { min: 19, max: 20 },
                SEMESTER_2: { min: 21, max: 39 }
            }),
            SEMESTER_START: Object.freeze({ MONTH: 8, DAY: 1 }),
            DAYS_OF_WEEK: Object.freeze(['–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞', '–ß–µ—Ç–≤–µ—Ä–≥', '–ü—è—Ç–Ω–∏—Ü–∞', '–°—É–±–±–æ—Ç–∞']),
            LOCALE: 'ru-RU',
            MS_IN_WEEK: 604800000,
            TRANSITION_DURATION: 150,
            SCROLL_DELAY: 500,
        });

        // –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ 1 —Å–µ–º–µ—Å—Ç—Ä–∞ (–Ω–µ–¥–µ–ª–∏ 1-18)
        const SCHEDULE_SEM1 = Object.freeze({
            odd: Object.freeze({
                '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫': Object.freeze([
                    Object.freeze({ time: '17:15 ‚Äì 18:50', name: '–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö —Å–µ—Ç–µ–π', type: '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è', teacher: '–¥–æ—Ü. –ö–∞—Ä–∞–±—Ü–µ–≤ –°.–ù.', link: 'https://bbb.kemsu.ru/b/6vx-3s8-jrp-5cy' }),
                    Object.freeze({ time: '18:50 ‚Äì 20:25', name: '–ê–Ω–∞–ª–∏–∑ –∑–∞—â–∏—â–µ–Ω–Ω–æ—Å—Ç–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π', type: '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è', teacher: '—Å—Ç. –ø—Ä–µ–ø. –¢–æ—Ä–≥—É–ª—å–∫–∏–Ω –í.–í.', link: 'https://bbb.kemsu.ru/b/adm-dao-8lw-i1t' })
                ]),
                '–í—Ç–æ—Ä–Ω–∏–∫': Object.freeze([
                    Object.freeze({ time: '17:15 ‚Äì 18:50', name: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö', type: '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è', teacher: '–∑–∞–≤. –∫–∞—Ñ–µ–¥—Ä–æ–π –ì—É–¥–æ–≤ –ê.–ú.', link: 'https://bbb.kemsu.ru/b/nt9-332-k4x-2pe' }),
                    Object.freeze({ time: '18:50 ‚Äì 20:25', name: '–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —á–∏—Å–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã', type: '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è', teacher: '–∑–∞–≤. –∫–∞—Ñ–µ–¥—Ä–æ–π –ì—É–¥–æ–≤ –ê.–ú.', link: 'https://bbb.kemsu.ru/b/nt9-332-k4x-2pe' })
                ]),
                '–°—Ä–µ–¥–∞': Object.freeze([
                    Object.freeze({ time: '15:30 ‚Äì 17:05', name: '–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥–µ–ª–∏ –∏ –º–µ—Ç–æ–¥—ã –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞', type: '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è', teacher: '–¥–æ—Ü. –°–∞–±–ª–∏–Ω—Å–∫–∏–π –ê.–ò.' }),
                    Object.freeze({ time: '17:15 ‚Äì 18:50', name: '–í–≤–µ–¥–µ–Ω–∏–µ –≤ Data Science –∏ –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ', type: '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è', teacher: '–¥–æ—Ü. –°–∞–±–ª–∏–Ω—Å–∫–∏–π –ê.–ò.' })
                ])
            }),
            even: Object.freeze({
                '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫': Object.freeze([
                    Object.freeze({ time: '17:15 ‚Äì 18:50', name: '–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö —Å–µ—Ç–µ–π', type: '–õ–µ–∫—Ü–∏—è', teacher: '–¥–æ—Ü. –ö–∞—Ä–∞–±—Ü–µ–≤ –°.–ù.', link: 'https://bbb.kemsu.ru/b/6vx-3s8-jrp-5cy' }),
                    Object.freeze({ time: '18:50 ‚Äì 20:25', name: '–ê–Ω–∞–ª–∏–∑ –∑–∞—â–∏—â–µ–Ω–Ω–æ—Å—Ç–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π', type: '–õ–µ–∫—Ü–∏—è', teacher: '—Å—Ç. –ø—Ä–µ–ø. –¢–æ—Ä–≥—É–ª—å–∫–∏–Ω –í.–í.', link: 'https://bbb.kemsu.ru/b/adm-dao-8lw-i1t' })
                ]),
                '–í—Ç–æ—Ä–Ω–∏–∫': Object.freeze([
                    Object.freeze({ time: '17:15 ‚Äì 18:50', name: '–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö', type: '–õ–µ–∫—Ü–∏—è', teacher: '–∑–∞–≤. –∫–∞—Ñ–µ–¥—Ä–æ–π –ì—É–¥–æ–≤ –ê.–ú.', link: 'https://bbb.kemsu.ru/b/nt9-332-k4x-2pe' }),
                    Object.freeze({ time: '18:50 ‚Äì 20:25', name: '–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —á–∏—Å–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã', type: '–õ–µ–∫—Ü–∏—è', teacher: '–∑–∞–≤. –∫–∞—Ñ–µ–¥—Ä–æ–π –ì—É–¥–æ–≤ –ê.–ú.', link: 'https://bbb.kemsu.ru/b/nt9-332-k4x-2pe' })
                ]),
                '–°—Ä–µ–¥–∞': Object.freeze([
                    Object.freeze({ time: '15:30 ‚Äì 17:05', name: '–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥–µ–ª–∏ –∏ –º–µ—Ç–æ–¥—ã –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞', type: '–õ–µ–∫—Ü–∏—è', teacher: '–¥–æ—Ü. –°–∞–±–ª–∏–Ω—Å–∫–∏–π –ê.–ò.' }),
                    Object.freeze({ time: '17:15 ‚Äì 18:50', name: '–í–≤–µ–¥–µ–Ω–∏–µ –≤ Data Science –∏ –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ', type: '–õ–µ–∫—Ü–∏—è', teacher: '–¥–æ—Ü. –°–∞–±–ª–∏–Ω—Å–∫–∏–π –ê.–ò.' })
                ])
            })
        });

        // –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ 2 —Å–µ–º–µ—Å—Ç—Ä–∞ (–Ω–µ–¥–µ–ª–∏ 21-39)
        const SCHEDULE_SEM2 = Object.freeze({
            odd: Object.freeze({
                '–°—Ä–µ–¥–∞': Object.freeze([
                    Object.freeze({ time: '15:30 ‚Äì 17:05', name: '–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —á–∏—Å–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã', type: '–õ–µ–∫—Ü–∏—è', teacher: '–∑–∞–≤. –∫–∞—Ñ–µ–¥—Ä–æ–π –ì—É–¥–æ–≤ –ê.–ú.' }),
                    Object.freeze({ time: '17:15 ‚Äì 18:50', name: '–ê–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π', type: '–õ–µ–∫—Ü–∏—è', teacher: '–¥–æ—Ü. –°–∞–±–ª–∏–Ω—Å–∫–∏–π –ê.–ò.' }),
                    Object.freeze({ time: '19:00 ‚Äì 20:35', name: '–ê–Ω–∞–ª–∏–∑ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π', type: '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è', teacher: '–¥–æ—Ü. –°–∞–±–ª–∏–Ω—Å–∫–∏–π –ê.–ò.' })
                ])
            }),
            even: Object.freeze({
                '–°—Ä–µ–¥–∞': Object.freeze([
                    Object.freeze({ time: '15:30 ‚Äì 17:05', name: '–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —á–∏—Å–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã', type: '–ü—Ä–∞–∫—Ç–∏–∫–∞', teacher: '–∑–∞–≤. –∫–∞—Ñ–µ–¥—Ä–æ–π –ì—É–¥–æ–≤ –ê.–ú.' })
                ]),
                '–ü—è—Ç–Ω–∏—Ü–∞': Object.freeze([
                    Object.freeze({ time: '17:15 ‚Äì 18:50', name: '–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –∏ –º–æ–¥–µ–ª–∏ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏–∏', type: '–õ–µ–∫—Ü–∏—è', teacher: '–¥–æ—Ü. –°–µ—Ä–≥–µ–µ–≤–∞ –û.–ê.' }),
                    Object.freeze({ time: '19:00 ‚Äì 20:35', name: '–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã –∏ –º–æ–¥–µ–ª–∏ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏–∏', type: '–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è', teacher: '–¥–æ—Ü. –°–µ—Ä–≥–µ–µ–≤–∞ –û.–ê.' })
                ])
            })
        });

        const DateManager = Object.freeze({
            getAcademicWeek(date) {
                const year = date.getFullYear();
                const month = date.getMonth();
                const startYear = month < CONFIG.SEMESTER_START.MONTH ? year - 1 : year;
                const semesterStart = new Date(startYear, CONFIG.SEMESTER_START.MONTH, CONFIG.SEMESTER_START.DAY);
                const dayOfWeek = semesterStart.getDay();
                const firstMonday = new Date(semesterStart);
                const dayCorrection = dayOfWeek === 0 ? 6 : dayOfWeek - 1;
                firstMonday.setDate(semesterStart.getDate() - dayCorrection);
                return Math.ceil((date - firstMonday) / CONFIG.MS_IN_WEEK);
            },
            addWeeks(date, weeks) {
                const result = new Date(date);
                result.setDate(result.getDate() + weeks * 7);
                return result;
            },
            formatHeaderDate(date) {
                return date.toLocaleDateString(CONFIG.LOCALE, {
                    weekday: 'short',
                    day: 'numeric',
                    month: 'numeric',
                    year: 'numeric'
                });
            },
            isHolidaySeason() {
                const now = new Date();
                const month = now.getMonth();
                const day = now.getDate();
                // 25 –¥–µ–∫–∞–±—Ä—è (–º–µ—Å—è—Ü 11) - 14 —è–Ω–≤–∞—Ä—è (–º–µ—Å—è—Ü 0)
                return (month === 11 && day >= 25) || (month === 0 && day <= 14);
            }
        });

        class ScheduleApp {
            #state = { weekOffset: 0 };
            #dom = {};
            #abortController = null;
            #isHolidaySeason = false;

            constructor() {
                this.#init();
            }

            #init() {
                this.#isHolidaySeason = DateManager.isHolidaySeason();
                this.#bindDomElements();
                this.#bindEventListeners();
                this.#initHolidayEffects();
                this.#render();
            }

            #initHolidayEffects() {
                if (this.#isHolidaySeason) {
                    document.getElementById('snowflakes').style.display = 'block';
                }
            }

            #bindDomElements() {
                this.#dom.dateDisplay = document.getElementById('dateDisplay');
                this.#dom.prevBtn = document.getElementById('prevBtn');
                this.#dom.nextBtn = document.getElementById('nextBtn');
                this.#dom.resetBtn = document.getElementById('resetBtn');
                this.#dom.weekNumber = document.getElementById('weekNumber');
                this.#dom.scheduleContainer = document.getElementById('schedule');
            }

            #bindEventListeners() {
                if (this.#abortController) {
                    this.#abortController.abort();
                }
                this.#abortController = new AbortController();
                const { signal } = this.#abortController;

                this.#dom.prevBtn.addEventListener('click', () => this.#navigate(-1), { signal });
                this.#dom.nextBtn.addEventListener('click', () => this.#navigate(1), { signal });
                this.#dom.resetBtn.addEventListener('click', () => this.#reset(), { signal });
                document.addEventListener('keydown', this.#handleKeyPress.bind(this), { signal });
            }

            #handleKeyPress(event) {
                if (event.target.closest('input, textarea, select')) return;

                const keyActions = {
                    'ArrowLeft': () => this.#navigate(-1),
                    'ArrowRight': () => this.#navigate(1),
                    'Home': () => this.#reset()
                };

                if (keyActions[event.key]) {
                    event.preventDefault();
                    keyActions[event.key]();
                }
            }

            #getCurrentWeekInfo(offset = 0) {
                const targetDate = DateManager.addWeeks(new Date(), this.#state.weekOffset + offset);
                const weekNumber = DateManager.getAcademicWeek(targetDate);
                const scheduleType = weekNumber % 2 === 0 ? 'even' : 'odd';
                const period = this.#getPeriodType(weekNumber);
                return Object.freeze({ date: targetDate, weekNumber, scheduleType, period });
            }

            #getPeriodType(weekNumber) {
                const { PERIODS } = CONFIG;
                if (weekNumber >= PERIODS.SEMESTER_1.min && weekNumber <= PERIODS.SEMESTER_1.max) {
                    return 'SEMESTER_1';
                }
                if (weekNumber >= PERIODS.HOLIDAYS.min && weekNumber <= PERIODS.HOLIDAYS.max) {
                    return 'HOLIDAYS';
                }
                if (weekNumber >= PERIODS.SEMESTER_2.min && weekNumber <= PERIODS.SEMESTER_2.max) {
                    return 'SEMESTER_2';
                }
                return 'SEMESTER_2';
            }

            #getScheduleForPeriod(period, scheduleType) {
                switch (period) {
                    case 'SEMESTER_1':
                        return SCHEDULE_SEM1[scheduleType] || {};
                    case 'SEMESTER_2':
                        return SCHEDULE_SEM2[scheduleType] || {};
                    case 'HOLIDAYS':
                    default:
                        return null;
                }
            }

            #navigate(direction) {
                const { weekNumber } = this.#getCurrentWeekInfo(direction);
                const isWithinRange = weekNumber >= CONFIG.WEEK_RANGE.MIN && weekNumber <= CONFIG.WEEK_RANGE.MAX;

                if (isWithinRange) {
                    this.#state.weekOffset += direction;
                    this.#render();
                }
            }

            #reset() {
                if (this.#state.weekOffset !== 0) {
                    this.#state.weekOffset = 0;
                    this.#render();
                }
            }

            #render() {
                this.#updateHeader();
                this.#updateNavigation();
                this.#renderScheduleWithTransition();
            }

            #updateHeader() {
                const { date } = this.#getCurrentWeekInfo();
                this.#dom.dateDisplay.textContent = DateManager.formatHeaderDate(date);
            }

            #updateNavigation() {
                const { weekNumber } = this.#getCurrentWeekInfo();
                const prevWeekInfo = this.#getCurrentWeekInfo(-1);
                const nextWeekInfo = this.#getCurrentWeekInfo(1);

                const canGoBack = prevWeekInfo.weekNumber >= CONFIG.WEEK_RANGE.MIN;
                const canGoForward = nextWeekInfo.weekNumber <= CONFIG.WEEK_RANGE.MAX;

                this.#dom.weekNumber.textContent = weekNumber;
                this.#dom.prevBtn.disabled = !canGoBack;
                this.#dom.nextBtn.disabled = !canGoForward;
                this.#dom.resetBtn.disabled = this.#state.weekOffset === 0;
            }

            #renderScheduleWithTransition() {
                this.#dom.scheduleContainer.classList.add('schedule-container--loading');

                setTimeout(() => {
                    this.#renderScheduleContent();
                    this.#dom.scheduleContainer.classList.remove('schedule-container--loading');
                    this.#scrollToToday();
                }, CONFIG.TRANSITION_DURATION);
            }

            #scrollToToday() {
                if (this.#state.weekOffset !== 0) return;

                const todayIndex = new Date().getDay();
                const dayName = CONFIG.DAYS_OF_WEEK[todayIndex === 0 ? 6 : todayIndex - 1];
                if (!dayName) return;

                const todayElement = document.getElementById(`day-${dayName}`);
                if (todayElement) {
                    setTimeout(() => {
                        todayElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }, CONFIG.SCROLL_DELAY);
                }
            }

            #renderScheduleContent() {
                const { scheduleType, period } = this.#getCurrentWeekInfo();
                
                if (period === 'HOLIDAYS') {
                    this.#dom.scheduleContainer.innerHTML = this.#createHolidaysMessage();
                    return;
                }

                const scheduleForWeek = this.#getScheduleForPeriod(period, scheduleType);
                const todayIndex = new Date().getDay();
                const todayName = this.#state.weekOffset === 0
                    ? CONFIG.DAYS_OF_WEEK[todayIndex === 0 ? 6 : todayIndex - 1]
                    : null;

                const scheduleHtml = CONFIG.DAYS_OF_WEEK
                    .map(day => {
                        const lessons = scheduleForWeek[day];
                        if (lessons?.length > 0) {
                            return this.#createDayCard(day, lessons, day === todayName);
                        }
                        return '';
                    })
                    .join('');

                this.#dom.scheduleContainer.innerHTML = scheduleHtml;
            }

            #createHolidaysMessage() {
                const holidayModeClass = this.#isHolidaySeason ? 'holiday-mode' : '';
                
                const sparklesHtml = this.#isHolidaySeason ? `
                    <div class="sparkles">
                        <div class="sparkle">‚ú®</div>
                        <div class="sparkle">‚≠ê</div>
                        <div class="sparkle">‚ú®</div>
                        <div class="sparkle">‚≠ê</div>
                        <div class="sparkle">‚ú®</div>
                        <div class="sparkle">‚≠ê</div>
                    </div>
                ` : '';

                const starHtml = this.#isHolidaySeason ? '<div class="tree-star">‚≠ê</div>' : '';

                const garlandHtml = this.#isHolidaySeason ? `
                    <div class="garland">
                        <div class="garland__light"></div>
                        <div class="garland__light"></div>
                        <div class="garland__light"></div>
                        <div class="garland__light"></div>
                        <div class="garland__light"></div>
                        <div class="garland__light"></div>
                        <div class="garland__light"></div>
                    </div>
                ` : '';

                const confettiHtml = this.#isHolidaySeason ? `
                    <div class="confetti"></div>
                    <div class="confetti"></div>
                    <div class="confetti"></div>
                    <div class="confetti"></div>
                    <div class="confetti"></div>
                    <div class="confetti"></div>
                    <div class="confetti"></div>
                    <div class="confetti"></div>
                    <div class="confetti"></div>
                ` : '';

                return `
                    <div class="empty-state ${holidayModeClass}">
                        ${confettiHtml}
                        <div class="tree-container">
                            ${sparklesHtml}
                            ${starHtml}
                            <div class="holiday-tree">üéÑ</div>
                        </div>
                        ${garlandHtml}
                        <h2 class="empty-state__title">–ù–æ–≤–æ–≥–æ–¥–Ω–∏–µ –∫–∞–Ω–∏–∫—É–ª—ã</h2>
                        <p class="empty-state__text">–ó–∞–Ω—è—Ç–∏–π –Ω–µ—Ç. –° –Ω–æ–≤—ã–º –≥–æ–¥–æ–º!</p>
                    </div>`;
            }

            #sanitizeHtml(text) {
                const div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }

            #isValidUrl(url) {
                try {
                    const urlObj = new URL(url);
                    return urlObj.protocol === 'https:';
                } catch {
                    return false;
                }
            }

            #createLessonHtml({ time, name, type, teacher, link }) {
                const hasValidLink = link && this.#isValidUrl(link);
                const tag = hasValidLink ? 'a' : 'div';
                const clickableClass = hasValidLink ? 'lesson--clickable' : '';
                const attrs = hasValidLink
                    ? `href="${this.#sanitizeHtml(link)}" target="_blank" rel="noopener noreferrer"`
                    : '';

                return `
                    <${tag} class="lesson ${clickableClass}" ${attrs}>
                        <div class="lesson__time">
                            <svg class="lesson__icon" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                            </svg>
                            <time>${this.#sanitizeHtml(time)}</time>
                        </div>
                        <h3 class="lesson__title">${this.#sanitizeHtml(name)}</h3>
                        <div class="lesson__meta">
                            <span class="lesson__tag">${this.#sanitizeHtml(type)}</span>
                            <span class="lesson__teacher">${this.#sanitizeHtml(teacher)}</span>
                        </div>
                    </${tag}>`;
            }

            #createDayCard(day, lessons, isToday) {
                const todayClass = isToday ? 'day-card--today' : '';
                const lessonsHtml = lessons.map(lesson => this.#createLessonHtml(lesson)).join('');

                return `
                    <article class="day-card ${todayClass}" id="day-${this.#sanitizeHtml(day)}">
                        <h2 class="day-card__header">${this.#sanitizeHtml(day)}</h2>
                        <div class="day-card__lessons">${lessonsHtml}</div>
                    </article>`;
            }

            destroy() {
                if (this.#abortController) {
                    this.#abortController.abort();
                }
            }
        }

        new ScheduleApp();
    </script>
</body>
</html>
