<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#F0F4F8" media="(prefers-color-scheme: light)">
    <meta name="theme-color" content="#0A1428" media="(prefers-color-scheme: dark)">
    <title>Расписание МКНм-241</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@350..600&display=swap" rel="stylesheet">
    <style>
        :root {
            --color-bg-base: 240 244 248;
            --color-bg-surface: 255 255 255;
            --color-bg-elevated: 248 250 252;
            --color-text-primary: 15 25 45;
            --color-text-secondary: 75 85 105;
            --color-text-tertiary: 125 135 155;
            --color-accent: 32 56 100;
            --color-accent-hover: 44 72 124;
            --color-accent-light: 75 107 175;
            --color-border: 15 25 45;
            --bg-base: rgb(var(--color-bg-base));
            --bg-surface: rgb(var(--color-bg-surface));
            --bg-elevated: rgb(var(--color-bg-elevated));
            --text-1: rgb(var(--color-text-primary));
            --text-2: rgb(var(--color-text-secondary));
            --text-3: rgb(var(--color-text-tertiary));
            --accent: rgb(var(--color-accent));
            --accent-hover: rgb(var(--color-accent-hover));
            --accent-light: rgb(var(--color-accent-light));
            --accent-soft: rgba(var(--color-accent) / 0.08);
            --accent-surface: rgba(var(--color-accent) / 0.12);
            --border: rgba(var(--color-border) / 0.08);
            --border-strong: rgba(var(--color-border) / 0.12);
            --space-xs: 0.4rem;
            --space-sm: 0.75rem;
            --space-md: 1rem;
            --space-lg: 1.5rem;
            --space-xl: 2rem;
            --space-2xl: 3rem;
            --radius-sm: 0.5rem;
            --radius-md: 0.75rem;
            --radius-lg: 1rem;
            --radius-xl: 1.25rem;
            --radius-2xl: 1.5rem;
            --radius-full: 624.9375rem;
            --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --shadow-sm: 0 1px 3px rgba(15 25 45 / 0.07), 0 1px 2px rgba(15 25 45 / 0.05);
            --shadow-md: 0 4px 6px rgba(15 25 45 / 0.07), 0 2px 4px rgba(15 25 45 / 0.05);
            --shadow-lg: 0 10px 15px rgba(15 25 45 / 0.07), 0 4px 6px rgba(15 25 45 / 0.05);
            --shadow-xl: 0 20px 25px rgba(15 25 45 / 0.07), 0 10px 10px rgba(15 25 45 / 0.04);
            --ease-out: cubic-bezier(0.2, 0.8, 0.4, 1);
            --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
            --duration-fast: 150ms;
            --duration-base: 300ms;
            --duration-slow: 500ms;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --color-bg-base: 10 20 40;
                --color-bg-surface: 15 25 45;
                --color-bg-elevated: 20 35 60;
                --color-text-primary: 235 240 250;
                --color-text-secondary: 175 185 205;
                --color-text-tertiary: 125 140 165;
                --color-accent: 75 107 175;
                --color-accent-hover: 92 124 192;
                --color-accent-light: 115 149 223;
                --color-border: 235 240 250;
                --shadow-sm: 0 1px 4px rgba(0 0 0 / 0.4);
                --shadow-md: 0 4px 8px rgba(0 0 0 / 0.5);
                --shadow-lg: 0 10px 20px rgba(0 0 0 / 0.6);
            }
        }

        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            -webkit-text-size-adjust: 100%;
            -webkit-font-smoothing: antialiased;
            text-rendering: optimizeLegibility;
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-sans);
            font-size: var(--text-base);
            font-weight: 400;
            line-height: 1.5;
            color: var(--text-1);
            background: var(--bg-base);
            background-image: 
                radial-gradient(at 10% 20%, rgba(var(--color-accent) / 0.03) 0px, transparent 50%),
                radial-gradient(at 90% 80%, rgba(var(--color-accent) / 0.03) 0px, transparent 50%);
        }

        .app {
            display: flex;
            flex-direction: column;
            gap: var(--space-xl);
            max-width: 56rem;
            margin: 0 auto;
            padding: var(--space-lg);
            min-height: 100vh;
            padding-bottom: calc(6rem + env(safe-area-inset-bottom));
        }

        .header {
            display: flex;
            flex-direction: column;
            gap: var(--space-lg);
            transform: translateZ(0);
            animation: headerSlideIn 0.6s var(--ease-spring) both;
        }

        @keyframes headerSlideIn {
            from { opacity: 0; transform: translateY(-20px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        
        .header__top {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: var(--space-md);
        }

        .header__date {
            font-size: var(--text-xl);
            font-weight: 600;
            letter-spacing: -0.01em;
            background: linear-gradient(135deg, var(--accent) 0%, var(--accent-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .week-nav {
            position: fixed;
            bottom: max(env(safe-area-inset-bottom), var(--space-md));
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            background: rgba(var(--color-bg-surface) / 0.9);
            backdrop-filter: blur(40px) saturate(180%);
            -webkit-backdrop-filter: blur(40px) saturate(180%);
            border: 1px solid var(--border);
            border-radius: var(--radius-xl);
            padding: var(--space-sm);
            box-shadow: var(--shadow-lg);
            transition: all var(--duration-base) var(--ease-out);
            animation: bottomBarSlideUp 0.5s var(--ease-spring) both;
        }

        @keyframes bottomBarSlideUp {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }
        
        .week-nav:hover {
            box-shadow: var(--shadow-xl);
            border-color: var(--border-strong);
            background: rgba(var(--color-bg-surface) / 0.95);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            height: 3rem;
            padding: 0 var(--space-lg);
            font-size: var(--text-sm);
            font-weight: 500;
            color: var(--text-2);
            background: transparent;
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-sm);
            cursor: pointer;
            transition: all var(--duration-base) var(--ease-out);
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .btn--icon {
            width: 3rem;
            padding: 0;
        }
        
        .btn:hover:not(:disabled) {
            color: var(--text-1);
            border-color: var(--border-strong);
            box-shadow: var(--shadow-md);
            transform: translateY(-2px);
            background: rgba(var(--color-accent) / 0.02);
        }

        .btn:active:not(:disabled) {
            transform: translateY(0) scale(0.98);
            box-shadow: var(--shadow-sm);
        }

        .btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
            pointer-events: none;
        }

        .btn--primary {
            color: var(--accent);
            border-color: var(--accent-soft);
            background: rgba(var(--color-accent) / 0.1);
            min-width: 4rem;
            font-weight: 600;
            font-size: var(--text-base);
        }

        .btn--primary:hover:not(:disabled) {
            color: var(--accent-hover);
            background: rgba(var(--color-accent) / 0.15);
            border-color: rgba(var(--color-accent) / 0.2);
        }
        
        .btn__icon {
            width: 1.25rem;
            height: 1.25rem;
            stroke-width: 2;
            transition: transform var(--duration-fast) var(--ease-out), color var(--duration-fast) var(--ease-out);
        }

        .btn:hover .btn__icon {
            transform: scale(1.1);
            color: var(--accent);
        }

        .schedule-container {
            display: flex;
            flex-direction: column;
            gap: var(--space-lg);
            transition: opacity var(--duration-fast) var(--ease-out), transform var(--duration-base) var(--ease-out);
            flex: 1;
        }

        .schedule-container--loading {
            opacity: 0;
            transform: translateY(20px);
        }

        .day-card {
            background: var(--bg-surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            animation: cardSlideIn 0.5s var(--ease-spring) both;
            transition: all var(--duration-base) var(--ease-out);
            position: relative;
        }

        .day-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent 0%, var(--accent) 50%, transparent 100%);
            opacity: 0;
            transition: opacity var(--duration-base) var(--ease-out);
        }

        @keyframes cardSlideIn {
            from { opacity: 0; transform: translateY(30px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        .day-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--border-strong);
        }

        .day-card:hover::before {
            opacity: 1;
        }

        .day-card__header {
            padding: var(--space-md);
            font-size: var(--text-base);
            font-weight: 500;
            background: var(--bg-surface);
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            transition: background-color var(--duration-base) var(--ease-out);
            position: relative;
        }

        .day-card__header::before {
            content: '';
            width: 0.5rem;
            height: 0.5rem;
            background: var(--accent);
            border-radius: 50%;
            flex-shrink: 0;
            transition: all var(--duration-base) var(--ease-out;
            box-shadow: 0 0 0 0 rgba(var(--color-accent) / 0.4);
        }
        
        .day-card--today .day-card__header {
            background: var(--accent-surface);
        }

        .day-card--today .day-card__header::before {
            transform: scale(1.4);
            box-shadow: 0 0 0 4px rgba(var(--color-accent) / 0.2);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(var(--color-accent) / 0.4); }
            70% { box-shadow: 0 0 0 6px rgba(var(--color-accent) / 0); }
            100% { box-shadow: 0 0 0 0 rgba(var(--color-accent) / 0); }
        }

        .day-card:hover .day-card__header::before {
            transform: scale(1.3);
            background: var(--accent-hover);
        }

        .lesson {
            display: flex;
            flex-direction: column;
            gap: var(--space-xs);
            padding: var(--space-md);
            color: inherit;
            text-decoration: none;
            border-bottom: 1px solid var(--border);
            transition: all var(--duration-base) var(--ease-out);
            cursor: pointer;
            animation: lessonSlideIn 0.6s var(--ease-out) both;
            position: relative;
        }

        .lesson::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--accent);
            transform: scaleY(0);
            transition: transform var(--duration-base) var(--ease-out);
            transform-origin: center;
        }

        @keyframes lessonSlideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .lesson:last-child {
            border-bottom: none;
        }

        .lesson:hover {
            background: var(--accent-soft);
            transform: translateX(8px);
            border-color: var(--accent-soft);
        }

        .lesson:hover::before {
            transform: scaleY(1);
        }

        .lesson:active {
            transform: translateX(8px) scale(0.98);
        }

        .lesson__time {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            font-size: 0.8rem;
            font-weight: 500;
            color: var(--text-3);
            transition: color var(--duration-base) var(--ease-out);
        }

        .lesson:hover .lesson__time {
            color: var(--accent);
        }

        .lesson__icon {
            width: 0.9rem;
            height: 0.9rem;
            color: var(--accent);
            flex-shrink: 0;
            transition: all var(--duration-base) var(--ease-out);
        }

        .lesson:hover .lesson__icon {
            transform: scale(1.2) rotate(5deg);
            color: var(--accent-hover);
        }

        .lesson__title {
            font-size: 0.95rem;
            font-weight: 500;
            line-height: 1.35;
            color: var(--text-1);
            transition: all var(--duration-base) var(--ease-out);
        }

        .lesson:hover .lesson__title {
            color: var(--accent);
            transform: translateX(2px);
        }

        .lesson__meta {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--space-sm);
        }

        .lesson__tag {
            padding: 0.25rem var(--space-sm);
            font-size: 0.8rem;
            font-weight: 500;
            color: var(--accent);
            background: var(--accent-soft);
            border-radius: var(--radius-md);
            transition: all var(--duration-base) var(--ease-out);
            border: 1px solid transparent;
        }

        .lesson:hover .lesson__tag {
            background: var(--accent);
            color: var(--bg-surface);
            transform: translateY(-2px);
            border-color: rgba(var(--color-accent) / 0.2);
        }

        .lesson__teacher {
            font-size: 0.8rem;
            color: var(--text-2);
            transition: all var(--duration-base) var(--ease-out);
        }

        .lesson:hover .lesson__teacher {
            color: var(--text-1);
            transform: translateX(2px);
        }

        .day-card:nth-child(1) { animation-delay: 0.1s; }
        .day-card:nth-child(2) { animation-delay: 0.2s; }
        .day-card:nth-child(3) { animation-delay: 0.3s; }
        .day-card:nth-child(4) { animation-delay: 0.4s; }
        .day-card:nth-child(5) { animation-delay: 0.5s; }
        .day-card:nth-child(6) { animation-delay: 0.6s; }
        
        .lesson:nth-child(1) { animation-delay: 0.15s; }
        .lesson:nth-child(2) { animation-delay: 0.25s; }
        .lesson:nth-child(3) { animation-delay: 0.35s; }
        .lesson:nth-child(4) { animation-delay: 0.45s; }
        
        @media (max-width: 768px) {
            .app {
                padding-left: var(--space-md);
                padding-right: var(--space-md);
                gap: var(--space-lg);
            }

            .header__top {
                flex-direction: column;
                align-items: stretch;
                gap: var(--space-md);
            }
            
            .lesson:hover {
                transform: translateX(4px);
            }

            .lesson:active {
                transform: translateX(4px) scale(0.98);
            }
        }

        @media (max-width: 640px) {
            .btn {
                height: 2.75rem;
                padding: 0 var(--space-md);
            }
            
            .btn--icon {
                width: 2.75rem;
            }

            .btn--primary {
                min-width: 3.5rem;
                font-size: var(--text-sm);
            }
        }

        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation: none !important;
                transition: none !important;
            }
            
            .lesson:hover,
            .day-card:hover,
            .btn:hover:not(:disabled) {
                transform: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <header class="header">
            <div class="header__top">
                <h1 class="header__date" id="dateDisplay"></h1>
            </div>
        </header>

        <main class="schedule-container" id="schedule"></main>

        <nav class="week-nav" aria-label="Навигация по неделям">
            <button class="btn btn--icon" id="prevBtn" aria-label="Предыдущая неделя">
                <svg class="btn__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/>
                </svg>
            </button>
            <button class="btn btn--primary" id="resetBtn">
                <span id="weekNumber"></span>
            </button>
            <button class="btn btn--icon" id="nextBtn" aria-label="Следующая неделя">
                <svg class="btn__icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
                </svg>
            </button>
        </nav>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const CONFIG = {
                WEEK_RANGE: { MIN: 1, MAX: 18 },
                SEMESTER_START: { MONTH: 8, DAY: 1 },
                DAYS_OF_WEEK: ['Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'],
                LOCALE: 'ru-RU',
                MS_IN_WEEK: 604800000,
                TRANSITION_DURATION: 150,
                SCROLL_DELAY: 500,
            };

            const SCHEDULE_DATA = {
                odd: { 
                    'Понедельник': [{ time: '17:15 – 18:50', name: 'Безопасность компьютерных сетей', type: 'Лабораторная', teacher: 'доц. Карабцев С.Н.', link: 'https://bbb.kemsu.ru/b/6vx-3s8-jrp-5cy' }, { time: '18:50 – 20:25', name: 'Анализ защищенности компьютерных систем и приложений', type: 'Лабораторная', teacher: 'ст. преп. Торгулькин В.В.', link: 'https://bbb.kemsu.ru/b/adm-dao-8lw-i1t' }], 
                    'Вторник': [{ time: '17:15 – 18:50', name: 'Администрирование защищенных баз данных', type: 'Лабораторная', teacher: 'зав. кафедрой Гудов А.М.', link: 'https://bbb.kemsu.ru/b/nt9-332-k4x-2pe' }, { time: '18
